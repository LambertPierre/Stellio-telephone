<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Stellio - By Pierre LAMBERT</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.54.0/dist/phaser.js"></script>
    <script src="menu.js"></script>
    <script src="modes.js"></script>
    <script src="cinematique.js"></script>
    <script src="scene1.js"></script>
    <script src="scene2.js"></script>
    <script src="scene3.js"></script>
    <script src="cinematique_fin.js"></script>
    <script src="class_PlatformVolante.js"></script>
    <style type="text/css">
        /*html,
    #body{
      background-image: linear-gradient(0.25turn,rgba(202, 168, 118, 0.616), rgba(172, 76, 236, 0.575));
     
      }
    #game-container {
      margin: 0;
      padding: 0;
    }

    #game-container {
      min-width: 100vw;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #game-container > canvas {
      cursor: url("assets/images/cursor.png"), pointer;
      border-radius: 5px;
      border: solid;
      border-color:black;
    }*/
    </style>
</head>
<body>
<script type="text/javascript">

var config = {
    type: Phaser.AUTO,
    width: 896,
    height: 448,
    parent: "game-container",
    input: {
            gamepad: true
    },
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 800 },
            debug: false
        }
    },
    scene: [menu, modes, cinematique, scene1, scene2, scene3, cinematique_fin]
};

var game = new Phaser.Game(config);

//class SceneA extends Phaser.Scene {

/*

    function preload ()
    {
        
        this.load.spritesheet('dude', 'assets/placeholder/php_deplacement.png', { frameWidth: 100, frameHeight: 150 });

        this.load.image('tiles','assets/placeholder/placeholder_tiled.png');
        this.load.tilemapTiledJSON('map','assets/placeholder/pc_T1.json');

        this.load.spritesheet('soul', 'assets/items/soul_sprite.png', { frameWidth: 80, frameHeight: 100 });

        this.load.spritesheet('pnj', 'assets/items/pnj_sprite.png', { frameWidth: 200, frameHeight: 300 });
        this.load.spritesheet('pnjApp', 'assets/items/pnj_apparition_sprite.png', { frameWidth: 300, frameHeight: 400 });
    }

    function create ()
    {
        //this.add.image(400, 300, 'sky');

        const map= this.make.tilemap({ key: 'map'});
        const tileset = map.addTilesetImage('placeholder_tiled', 'tiles');
        const vert = map.createStaticLayer('vert', tileset, 0, 0);
        const orange = map.createStaticLayer('orange', tileset, 0, 0);
        orange.setCollisionByExclusion(-1,true);
        
        
        player = this.physics.add.sprite(700, 700, 'dude');
        player.setCollideWorldBounds(true);
        player.body.height = 100;
        player.body.setOffset(0, 50);   

        this.physics.add.collider(orange, player);
        const jaune = map.createStaticLayer('jaune', tileset, 0, 0);

        /*platforms.create(600, 400, 'ground');
        platforms.create(50, 250, 'ground');
        platforms.create(750, 220, 'ground');*/

    
        //   soul = this.add.sprite(400, 300, 'soul');



        //  Player physics properties. Give the little guy a slight bounce.
        /*player.setBounce(0.2);
        player.setCollideWorldBounds(true);*/

        //  Our player animations, turning, walking left and walking right.

        //----------------------------------------------------------------  ANIMATION  -------------------------------------------------------------------------//
        /*this.anims.create({
            key: 'phpbb',
            frames: this.anims.generateFrameNumbers('dude', { start: 0, end: 1 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phpbd',
            frames: this.anims.generateFrameNumbers('dude', { start: 2, end: 3 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phpdd',
            frames: this.anims.generateFrameNumbers('dude', { start: 4, end: 5 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phphd',
            frames: this.anims.generateFrameNumbers('dude', { start: 6, end: 7 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phphh',
            frames: this.anims.generateFrameNumbers('dude', { start: 8, end: 9 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phphg',
            frames: this.anims.generateFrameNumbers('dude', { start: 10, end: 11 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phpgg',
            frames: this.anims.generateFrameNumbers('dude', { start: 12, end: 13 }),
            frameRate: 10,
            repeat: -1
        });
        this.anims.create({
            key: 'phpbg',
            frames: this.anims.generateFrameNumbers('dude', { start: 14, end: 15 }),
            frameRate: 10,
            repeat: -1
        });*/


        /*this.anims.create({
            key: 'turn',
            frames: [ { key: 'dude', frame: 4 } ],
            frameRate: 20
        });

        this.anims.create({
            key: 'right',
            frames: this.anims.generateFrameNumbers('dude', { start: 5, end: 8 }),
            frameRate: 10,
            repeat: -1
        });*/

        //----------------------------------------------------------------------//
/*
        this.anims.create({
            key: 'soul_anim',
            frames: this.anims.generateFrameNumbers('soul', { start: 0, end: 12 }),
            frameRate: 10,
            repeat: -1
        });

        this.anims.create({
            key: 'pnj_anim',
            frames: this.anims.generateFrameNumbers('pnj', { start: 0, end: 6 }),
            frameRate: 10,
            repeat: -1
        });

        this.anims.create({
            key: 'pnjApp_anim',
            frames: this.anims.generateFrameNumbers('pnjApp', { start: 0, end: 4 }),
            frameRate: 10,
            repeat: 0
        });*/

        //--------------------------------------------------------------  FIN ANIMATION  ------------------------------------------------------------------------//

        //  Input Events
        //cursors = this.input.keyboard.createCursorKeys();
/*
        cursors = this.input.keyboard.addKeys(
            {up:Phaser.Input.Keyboard.KeyCodes.Z,
            down:Phaser.Input.Keyboard.KeyCodes.S,
            left:Phaser.Input.Keyboard.KeyCodes.Q,
            right:Phaser.Input.Keyboard.KeyCodes.D});


    }

    function update ()
    {
        if (gameOver)
        {
            return;
        }*/
        /*if (soulCollected == false)
        {
            soul.anims.play('soul_anim', true);
        }

        if (player.x>500 && playerApproach == false){
            playerApproach = true;
            pnj = this.add.sprite(400, 700, 'pnj');
            pnj.anims.play('pnj_anim', true);
            pnjApp = this.add.sprite(400, 700, 'pnjApp').setScale(1.5);
            pnjApp.anims.play('pnjApp_anim', true);
            setTimeout(function(){pnjApp.destroy()}, 500);

        }*/


        //------------------------------------------------------------------- Déplacement ----------------------------------------------------------------//

        /*if (cursors.left.isDown)
        {
            player.setVelocityX(-160);

            player.anims.play('left', true);
        }
        else if (cursors.right.isDown)
        {
            player.setVelocityX(160);

            player.anims.play('right', true);
        }
        else
        {
            player.setVelocityX(0);

            player.anims.play('turn');
        }

        if (cursors.up.isDown && player.body.touching.down)
        {
            player.setVelocityY(-330);
        }*/

        /*
        if (cursors.right.isDown && cursors.up.isDown && !cursors.left.isDown && !cursors.down.isDown){
            player.x += speed/Math.sqrt(2);           // Déplacements vers la diagonale haut doite                     
            player.y -= speed/Math.sqrt(2); 
            player.anims.play('phphd', true);
        }

        else if (cursors.left.isDown && cursors.up.isDown && !cursors.down.isDown && !cursors.right.isDown){
            player.x -= speed/Math.sqrt(2);           // Déplacements vers la diagonale haut gauche                      
            player.y -= speed/Math.sqrt(2); 
            player.anims.play('phphg', true);                      
        }

        else if (cursors.down.isDown && cursors.left.isDown && !cursors.up.isDown && !cursors.right.isDown){
            player.x -= speed/Math.sqrt(2);           // Déplacements vers la diagonale bas gauche                      
            player.y += speed/Math.sqrt(2);
            player.anims.play('phpbg', true);                       
        }

        else if (cursors.down.isDown && cursors.right.isDown && !cursors.left.isDown && !cursors.up.isDown){
            player.x += speed/Math.sqrt(2);           // Déplacements vers la diagonale bas droite                      
            player.y += speed/Math.sqrt(2);
            player.anims.play('phpbd', true);                         
        }

        // -- Déplacements Horizontaux Verticaux --


        else if (cursors.right.isDown && !cursors.left.isDown && !cursors.down.isDown && !cursors.up.isDown){
            player.x += speed;
            player.anims.play('phpdd', true);                        // Déplacement vers la droite
        }

        else if (cursors.left.isDown && !cursors.right.isDown && !cursors.down.isDown && !cursors.up.isDown){
            player.x -= speed;
            player.anims.play('phpgg', true);                        // Déplacement vers la gauche
        }

        else if (cursors.down.isDown && !cursors.left.isDown && !cursors.up.isDown && !cursors.right.isDown){
            player.y += speed;
            player.anims.play('phpbb', true);                        // Déplacement vers le bas
        }

        else if (cursors.up.isDown && !cursors.left.isDown && !cursors.down.isDown && !cursors.right.isDown){
            player.y -= speed;
            player.anims.play('phphh', true);                        // Déplacement vers le haut
        }
        else{
            player.anims.play('phpbb',false);
        }
        

    }
*/

//}

</script>

</body>
</html>